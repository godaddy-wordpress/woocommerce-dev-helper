"use strict";(function(){jQuery(document).ready(function(l){var i;return i=function(t){var n,o,_,e,a,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if("wc_dev_helper_get_memberships_bulk_generation_status"===t)e=wc_dev_helper_memberships_bulk_generation.get_memberships_bulk_generation_status_nonce,a=wc_dev_helper_memberships_bulk_generation.i18n.generation_success,n=wc_dev_helper_memberships_bulk_generation.i18n.generation_error,o=wc_dev_helper_memberships_bulk_generation.i18n.generation_in_progress;else{if("wc_dev_helper_get_memberships_bulk_destruction_status"!==t)return console.log("Invalid action: "+t),void console.log("Job ID: "+s);e=wc_dev_helper_memberships_bulk_generation.get_memberships_bulk_destruction_status_nonce,a=wc_dev_helper_memberships_bulk_generation.i18n.destruction_success,n=wc_dev_helper_memberships_bulk_generation.i18n.destruction_error,o=wc_dev_helper_memberships_bulk_generation.i18n.destruction_in_progress}return 0===l("p.bulk-generation-status .progress").length&&l("p.bulk-generation-status").append(' <span class="progress">'+o+"</span>"),n='<span class="error"   style="color: #DC3232;">&#10005;</span> '+n,a='<span class="success" style="color: #008000;">&#10004;</span> '+a,_={data:{action:t,security:e,job_id:s}},l.post(wc_dev_helper_memberships_bulk_generation.ajax_url,_.data).done(function(e){var s,r;return e.success?"completed"!==e.data.status?(s=e.data.progress?parseInt(e.data.progress,10):0,r=e.data.total?parseInt(e.data.total,10):0,l("p.bulk-generation-status .progress").html(o+" ("+s+" / "+r+")"),setTimeout(i(t,e.data&&e.data.id?e.data.id:null),1e5)):(l("#bulk-processing-memberships-spinner").removeClass("is-active"),l("p.bulk-generation-status").html(a),l("#process-memberships").prop("disabled",!1)):(l("p.bulk-generation-status").html(n+" "+e.data),l("#process-memberships").prop("disabled",!1),console.log("An error occurred while fetching the progress for the job: "+t),console.log("Request:"),console.log(_.data),console.log("Response:"),console.log(e.data))}).fail(function(e){return l("p.bulk-generation-status").html(n+" "+e.data),l("#bulk-processing-memberships-spinner").removeClass("is-active"),l("#process-memberships").prop("disabled",!1),console.log("Job failed: "+t),console.log("Request:"),console.log(_.data),console.log("Response:"),console.log(e&&e.data?e.data:e)})},wc_dev_helper_memberships_bulk_generation.is_bulk_generation_screen&&wc_dev_helper_memberships_bulk_generation.bulk_generation_job_in_progress&&i("wc_dev_helper_get_memberships_bulk_generation_status",wc_dev_helper_memberships_bulk_generation.bulk_generation_job_in_progress),wc_dev_helper_memberships_bulk_generation.is_bulk_destruction_screen&&wc_dev_helper_memberships_bulk_generation.bulk_destruction_job_in_progress&&i("wc_dev_helper_get_memberships_bulk_destruction_status",wc_dev_helper_memberships_bulk_generation.bulk_destruction_job_in_progress),l("#process-memberships").on("click",function(e){var s,r,t,n,o;if(e.preventDefault(),l(this).hasClass("generate-memberships"))s="wc_dev_helper_memberships_bulk_generate",o="wc_dev_helper_get_memberships_bulk_generation_status",t=wc_dev_helper_memberships_bulk_generation.start_memberships_bulk_generation_nonce,r=parseInt(l("#members-to-generate").val(),10);else{if(!l(this).hasClass("destroy-memberships"))return console.log("Unknown or undefined job to launch."),void console.log(l(this));s="wc_dev_helper_memberships_bulk_destroy",o="wc_dev_helper_get_memberships_bulk_destruction_status",t=wc_dev_helper_memberships_bulk_generation.start_memberships_bulk_destruction_nonce,r=0}return l(this).prop("disabled",!0),l("#bulk-processing-memberships-spinner").addClass("is-active"),n={data:{action:s,security:t,members_to_generate:r}},l.post(wc_dev_helper_memberships_bulk_generation.ajax_url,n.data,function(e){var s;return e.success?i(o,e.data&&e.data.id?e.data.id:null):(s='<span class="error" style="color: #DC3232;">&#10005;</span> '+(e.data?e.data:""),l("#bulk-processing-memberships-spinner").removeClass("is-active"),l("p.bulk-generation-status").html(s),l("#process-memberships").prop("disabled",!1),console.log("Could not start job: "+o),console.log("Request:"),console.log(n.data),console.log("Response:"),console.log(e.data))})})})}).call(void 0);
//# sourceMappingURL=wc-dev-helper-memberships-bulk-generation.min.js.map
