"use strict";(function(){jQuery(document).ready(function(a){var o;return o=function(e,s){var r,_,t,n,i;if(0===a("p.bulk-generation-status .progress").length&&a("p.bulk-generation-status").append(' <span class="progress"></span>'),"wc_dev_helper_get_memberships_bulk_generation_status"===e)n=wc_dev_helper_memberships_bulk_generation.get_memberships_bulk_generation_status_nonce,i=wc_dev_helper_memberships_bulk_generation.i18n.generation_success,_=wc_dev_helper_memberships_bulk_generation.i18n.generation_error,t=wc_dev_helper_memberships_bulk_generation.i18n.generation_in_progress;else{if("wc_dev_helper_get_memberships_bulk_destruction_status"!==e)return void console.log("Invalid action: "+e);n=wc_dev_helper_memberships_bulk_generation.get_memberships_bulk_generation_status_nonce,i=wc_dev_helper_memberships_bulk_generation.i18n.destruction_success,_=wc_dev_helper_memberships_bulk_generation.i18n.destruction_error,t=wc_dev_helper_memberships_bulk_generation.i18n.destruction_in_progress}return _='<span class="error"   style="color: #DC3232;">&#10005;</span> '+_,i='<span class="success" style="color: #008000;">&#10004;</span> '+i,r={action:e,security:n,job_id:s},a.post(wc_dev_helper_memberships_bulk_generation.ajax_url,r).done(function(e){var s,r;return e.success?"completed"!==e.data.status?(s=e.data.progress?parseInt(e.data.progress,10):0,r=e.data.total?parseInt(e.data.total,10):0,a("p.bulk-generation-status .progress").html(t+" ("+s+" / "+r+")"),setTimeout(o(e.data.id),1e5)):(a("#bulk-processing-memberships-spinner").removeClass("is-active"),a("p.bulk-generation-status").html(i),a("#process-memberships").prop("disabled",!1)):(a("p.bulk-generation-status").html(_+" "+("undefined"!==e.data?e.data:"")),a("#process-memberships").prop("disabled",!1),console.log(e.data))}).fail(function(e){return a("p.bulk-generation-status").html(_+" "+(e.data?e.data:"")),a("#bulk-processing-memberships-spinner").removeClass("is-active"),a("#process-memberships").prop("disabled",!1),console.log(e.data)})},wc_dev_helper_memberships_bulk_generation.bulk_generation_job_in_progress&&o("wc_dev_helper_get_memberships_bulk_generation_status",wc_dev_helper_memberships_bulk_generation.bulk_generation_job_in_progress),wc_dev_helper_memberships_bulk_generation.bulk_destruction_job_in_progress&&o("wc_dev_helper_get_memberships_bulk_destruction_status",wc_dev_helper_memberships_bulk_generation.bulk_destruction_job_in_progress),a("#process-memberships").on("click",function(e){var s,r,_,t,n;if(e.preventDefault(),a(this).hasClass("generate-memberships"))s="wc_dev_helper_memberships_bulk_generate",n="wc_dev_helper_get_memberships_bulk_generation_status",t=wc_dev_helper_memberships_bulk_generation.start_memberships_bulk_generation_nonce,r=parseInt(a("#members-to-generate").val(),10);else{if(!a(this).hasClass("destroy-memberships"))return void console.log(a(this));s="wc_dev_helper_memberships_bulk_destroy",n="wc_dev_helper_get_memberships_bulk_destruction_status",t=wc_dev_helper_memberships_bulk_generation.start_memberships_bulk_destruction_nonce,r=0}return a(this).prop("disabled",!0),a("#bulk-processing-memberships-spinner").addClass("is-active"),_={action:s,security:t,members_to_generate:r},a.post(wc_dev_helper_memberships_bulk_generation.ajax_url,_,function(e){return e.success?o(n,e.data&&e.data.id?e.data.id:null):(a("#bulk-processing-memberships-spinner").removeClass("is-active"),a("p.bulk-generation-status").html(e.data?e.data:""),a("#process-memberships").prop("disabled",!1),console.log(e))})})})}).call(void 0);
//# sourceMappingURL=wc-dev-helper-memberships-bulk-generation.min.js.map
